# AstrBot 简易群宠物游戏插件 (v1.5)

一款群聊宠物养成对战插件，专为 [AstrBot](https://github.com/AstrBotDevs/AstrBot) 框架设计。
它集宠物养成、技能学习、状态异常、持有物、PVP对战和可配置的随机事件于一体，能极大提升群组的活跃度和趣味性。

## ✨ 功能特性 (v1.5)
- **JSON数据外置**：所有核心游戏数据（宠物、技能、散步事件）均由JSON文件配置，方便服主**自由添加新宠物、新技能**！
- **技能系统**：宠物可学习多达4个技能，战斗不再是简单的攻防，而是充满策略的技能对决。
- **属性克制**：内置“水、火、草、电、毒、普通”等属性，并可在 `main.py` 中自由扩展克制关系。
- **状态异常**：战斗中可触发“中毒”、“睡眠”、“麻痹”状态，状态会保留至战斗后，需要药品（如“解毒药”）治愈。
- **持有物系统**：玩家可通过 `/装备` 让宠物携带如“力量头带”等物品，在战斗中获得被动加成。
- **进化系统**：宠物达到指定等级后（在 `pets.json` 中配置），可通过 `/宠物进化` 获得更强的形态和属性。
- **动态状态卡**：使用 `/我的宠物` 会生成一张包含等级、经验、技能、持有物和异常状态的精美图片。
- **PVE与PVP**：
  - `/散步` 时有几率遭遇野生宠物，触发PVE战斗。
  - 通过 `/对决 @某人` 可与群内其他玩家进行1v1对战，胜者有赏！
- **经济与养成**：
  - 完善的商店、背包、签到系统。
  - 玩家可通过战斗和签到赚钱，购买食物、药品、持有物和技能光盘(TM)。
  - 完善的被动状态衰减机制（心情、饱食度）。

## 🚀 安装与配置

1.  **安装方法**:
    * 在 AstrBot 插件页面输入本仓库地址或用zip安装。

2.  **依赖安装**:
    * 本插件需要 `pillow` 库来生成状态图。请在 AstrBot 环境中运行：
        ```bash
        pip install pillow
        ```

3.  **配置文件 (重要)**:
    * **数据库**: `data/plugin_data/astrbot_plugin_pet/pets.db`
    * **插件启动后，以下JSON文件会自动生成在** `data/plugins/astrbot_plugin_pet/` **目录中，你可以随时修改它们来自定义游戏内容！**
        * `pets.json`: 定义所有宠物、基础属性、进化链、技能学习表。
        * `moves.json`: 定义所有技能、威力、属性、以及附加效果（如中毒几率）。
        * `walk_events.json`: 定义 `/散步` 时可能触发的所有随机事件。

## 🎮 命令列表 (v1.5)
> 通过指令 `/宠物菜单` 可以在群内随时唤出宠物命令。

--- 🐾 宠物插件帮助菜单 v1.5 🐾 ---
【核心功能】
/领养宠物 [名字] - 领养一只新宠物。
/我的宠物 - 查看宠物详细状态图(含状态/持有物)。
/宠物改名 [新名] - 给你的宠物换个名字。
/宠物进化 - 当宠物达到等级时进化。

【技能与装备】
/宠物技能 - 查看当前技能和可学技能。
/学习技能 [栏位] [技能名] - 学习新技能。
/装备 [物品名] - 让宠物携带一个持有物。

【日常互动】
/宠物签到 - 每天领取金钱奖励。
/散步 - 带宠物散步，触发奇遇或战斗。
/使用 [物品名] - 使用食物或药品。 (原/投喂)

【商店与物品】
/宠物商店 - 查看可购买的商品。
/购买 [物品] [数量] - 从商店购买物品。
/宠物背包 - 查看你拥有的物品。

【社交与竞技】
/对决 @某人 - 与群友的宠物进行1v1对决。
/宠物排行 - 查看本群最强的宠物们。

【其他命令】
/丢弃宠物 - (危险) 与你的宠物告别，慎用！

---

## 📝 更新日志

#### v1.5 - 状态与持有物
- **新增 状态异常**：引入“中毒”、“睡眠”、“麻痹”状态。
- **新增 持有物系统**：添加 `/装备` 命令，宠物可携带物品并获得战斗加成。
- **新增 药品系统**：`/投喂` 升级为 `/使用`，商店上架“解毒药”等药品。
- **战斗重构**：战斗引擎完全重构，以结算状态、持有物和技能效果。
- **状态图更新**：`/我的宠物` 现在会显示宠物的异常状态和持有物。
- **数据扩展示例**：添加了“电”、“毒”属性，并新增宠物“闪电”作为配置示例。

#### v1.4 - 技能与数据外置
- **新增 技能系统**：宠物可学习4个技能，战斗逻辑重构，使用技能进行对战。
- **新增 技能管理**：添加 `/宠物技能` 和 `/学习技能` 命令。
- **新增 数据外置**：将宠物数据 (`PET_TYPES`) 和技能数据移至外部 `pets.json` 和 `moves.json`，极大提升可配置性。
- **新增 技能学习表 (Learnset)**：宠物升级时会根据 `pets.json` 自动提示可学新技能。
- **状态图更新**：`/我的宠物` 现在会显示宠物装备的4个技能。

#### v1.3 - 移除LLM
- **移除 LLM 依赖**：移除了 `/散步` 功能对大语言模型(LLM)的调用。
- **新增 `walk_events.json`**：`/散步` 改为从可配置的 `walk_events.json` 文件中抽取事件。
- **功能增强**：在事件配置中支持“范围随机数”奖励，并添加了“小游戏(minigame)”事件类型。

#### v1.2
- 初始发布版本。
- 基础功能：领养、PVP对决、状态图、商店。
- `/散步` 功能由 **LLM 驱动** 生成随机事件。
- 所有宠物数据硬编码在 `main.py` 文件中。

## 🔮 未来计划
- 【PVE】`/散步` 时遭遇的野生宠物，可以尝试 `/捕捉`。
- 【PVE】添加“宠物球”等道具到商店。
- 【PVP】研究好友对战、双打对战等可能性。